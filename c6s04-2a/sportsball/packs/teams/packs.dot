digraph package_diagram {
  rankdir=TD

  graph [
    labelloc="t"
    fontname="Helvetica,Arial,sans-serif"
    dpi=100
    layout=dot
    label="Visualization of 6 packs, generated using `bin/packs`",
    fontsize=24
  ]
  node [
    fontname="Helvetica,Arial,sans-serif"
    fontsize=26.0
    fontcolor=black
    fillcolor=white
    color=black
    height=1.0
    style=filled
    shape=plain
  ]

    subgraph app {
      shape=box
      color=darkgrey
      fillcolor=lightblue
      style=filled

        label="app"
        cluster=true
        rank = 0

    }
    subgraph UI {
      shape=box
      color=darkgrey
      fillcolor=lightblue
      style=filled

        label="UI"
        cluster=true
        rank = 1

        "packs/prediction_ui" [
            fontsize=26.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/prediction_ui"
            label=               <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                  <tr> <td align='left'> packs/prediction_ui </td> </tr>
                </table>
              >
          ]

        "packs/teams_admin" [
            fontsize=26.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/teams_admin"
            label= 
              <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='16'><tr><td>
                  <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                    <tr> <td port='private'> packs/teams_admin </td> </tr>
                  </table>
                </td></tr></table>
              >
          ]

    }
    subgraph data {
      shape=box
      color=darkgrey
      fillcolor=lightblue
      style=filled

        label="data"
        cluster=true
        rank = 2

        "packs/teams" [
            fontsize=40.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/teams"
            label= 
              <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='16'><tr><td>
                  <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                    <tr> <td port='private'> packs/teams </td> </tr>
                  </table>
                </td></tr></table>
              >
          ]

                "packs/prediction_ui" -> "packs/teams" [
                  style=invis
                ]
                "packs/teams_admin" -> "packs/teams" [
                  style=invis
                ]
        "packs/games" [
            fontsize=26.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/games"
            label= 
              <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='16'><tr><td>
                  <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                    <tr> <td port='private'> packs/games </td> </tr>
                  </table>
                </td></tr></table>
              >
          ]

                "packs/prediction_ui" -> "packs/games" [
                  style=invis
                ]
                "packs/teams_admin" -> "packs/games" [
                  style=invis
                ]
    }
    subgraph utility {
      shape=box
      color=darkgrey
      fillcolor=lightblue
      style=filled

        label="utility"
        cluster=true
        rank = 3

        "packs/predictor_interface" [
            fontsize=26.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/predictor_interface"
            label= 
              <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='16'><tr><td>
                  <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                    <tr> <td port='private'> packs/predictor_interface </td> </tr>
                  </table>
                </td></tr></table>
              >
          ]

                "packs/teams" -> "packs/predictor_interface" [
                  style=invis
                ]
                "packs/games" -> "packs/predictor_interface" [
                  style=invis
                ]
        "packs/rails_shims" [
            fontsize=26.0
              URL="https://github.com/shageman/package-based-rails-applications-book/tree/main/c4s07/sportsball/packs/rails_shims"
            label=               <
                <table border='0' cellborder='1' cellspacing='0' cellpadding='4'>
                  <tr> <td align='left'> packs/rails_shims </td> </tr>
                </table>
              >
          ]

                "packs/teams" -> "packs/rails_shims" [
                  style=invis
                ]
                "packs/games" -> "packs/rails_shims" [
                  style=invis
                ]
    }
    subgraph NotInLayer {
      shape=box
      color=darkgrey
      fillcolor=lightblue
      style=filled


    }

          "packs/teams" -> "packs/predictor_interface" [
            color=darkgreen
          ]
          "packs/teams" -> "packs/rails_shims" [
            color=darkgreen
          ]
          "packs/prediction_ui" -> "packs/teams" [
            color=darkgreen
          ]
          "packs/teams_admin" -> "packs/teams" [
            color=darkgreen
          ]
          "packs/games" -> "packs/teams" [
            color=darkgreen
          ]

            "packs/games" -> "packs/teams":private [
              color=darkred
              style=dashed
              constraint=false
              # headlabel="privacy"
                arrowhead=crow
                headport=sw
              
              penwidth=1
            ]

  subgraph cluster_legend {
    label="Legend"

    A [ fontsize=12 shape=box label="package"]
    B [ fontsize=12 shape=box label="package"]
    C [ fontsize=12 shape=box label="package"]
    D [ fontsize=12 shape=box label="package"]
    E [ fontsize=12 shape=box label="package"]
    F [ fontsize=12 shape=box label="package"]
    G [ fontsize=12 shape=box label="package"]
    H [ fontsize=12 shape=box label="package"]
    I [ fontsize=12 shape=box label="package"]
    J [ fontsize=12 shape=box label="package"]

    A -> B [label="accepted dependency" color=darkgreen]
    C -> D [label="privac todo" color=darkred style=dashed arrowhead=crow]
    E -> F [label="architecture todo" color=darkred style=dashed arrowhead=invodot]
    G -> H [label="visibility todo" color=darkred style=dashed arrowhead=obox]
    I -> J [label="dependency todo" color=darkred style=dashed arrowhead=odot]
  }
}
